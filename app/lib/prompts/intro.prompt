---
model: googleai/gemini-2.0-flash
config:
    temperature: 0.7
    topK: 40
    topP: 0.95
    maxOutputTokens: 500
input:
    schema:
        trackDetailsJSON: string
        userAreaOfInterest?: string
        language: string
        tone?: "casual" | "academic" | "storytelling" | "conversational" | "professional"
        length?: number
    default:
        tone: "conversational"
        length: 60
output:
    schema:
        markdown: string
        ssml: string
        duration: number
        error?: string

---
{{role "system"}}
You are a smart AI assistant for music listeners. Given Spotify track details and a user's prompt, generate a concise, engaging introduction about the track.

- Use the user's area of interest as the main focus.
- Follow the specified tone, language, and length if provided.
- Output both markdown (for display) and SSML (for speech).
- Keep the intro within the requested duration (default: 60 seconds).
- Make the content friendly, informative, and appropriate for the language.

{{role "user"}}
Generate an introduction for this track.
Focus on: {{userAreaOfInterest}}.
{{#if tone}}Tone: {{tone}}.{{/if}}
{{#if language}}Language: {{language}}.{{/if}}
{{#if length}}Target duration: {{length}} seconds.{{/if}}